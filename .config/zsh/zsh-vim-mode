bindkey -v
export KEYTIMEOUT=1

# Use vim keys in tab completion menu
bindkey -M menuselect '^h' vi-backward-char
bindkey -M menuselect '^k' vi-up-line-or-history
bindkey -M menuselect '^l' vi-forward-char
bindkey -M menuselect '^j' vi-down-line-or-history
bindkey -M menuselect '^[[Z' vi-up-line-or-history
bindkey -v '^?' backward-delete-char

# # Change cursor shape for different vi modes
# zle-keymap-select() {
#     case $KEYMAP in 
#         vicmd) echo -ne '\e[1 q' ;; #block
#         viins|main) echo -ne '\e[5 q' ;; #beam
#     esac
# }
# zle -N zle-keymap-select
zle-line-init() {
    zle -K viins # initiate 'vi insert' as keymap (can be removed if 'bindkey -V' is set elsewhere)
    echo -ne '\e[5 q' # beam cursor
}
zle -N zle-line-init
echo -ne '\e[5 q' # beam cursor
